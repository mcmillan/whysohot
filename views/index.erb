<!doctype html>
<html ng-app="whySoHot">
  <head>
    <title>Why is it so hot in here?</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
      * {
        padding: 0;
        margin: 0;
      }

      body {
        font: 14px 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;
        -webkit-font-smoothing: antialiased;
        letter-spacing: 1px;
        color: #fff;
        background: red;
      }

      .container {
        position: absolute;
        top: 50%;
        left: 0;
        right: 0;
        transform: translate(0, -50%);
        text-align: center;
      }

      .currently {
        font-size: 100px;
        letter-spacing: 5px;
      }

      .previously {
        width: 460px;
        margin: 14px auto 0;
        padding: 0 20px;
        text-align: left;
      }

      .previously .timestamp {
        float: right;
      }

      p {
        margin: 15px 0;
      }

      .outside {
        padding-bottom: 15px;
        border-bottom: 2px rgba(255, 255, 255, 0.2) solid;
      }

      @media screen and (max-width: 500px) {
        .previously {
          width: auto;
        }
      }

      @media screen and (max-height: 500px) {
        .container {
          position: relative;
          top: 0;
          transform: none;
          padding-top: 20px;
        }
      }
    </style>
  </head>

  <body>
    <div class="container" ng-controller="ReadingCtrl">
      <p>Inside, it's currently</p>
      <div class="currently">
        {{readings[0].f35_temperature}}&deg;C
      </div>
      <p class="outside">Outside, it's <strong>{{readings[0].outside_temperature}}&deg;C</strong>.</p>
      <p>Previously:</p>
      <div class="previously" ng-repeat="reading in readings.slice(1)">
        <div class="timestamp">{{reading.taken_at | date : 'dd MMM yyyy HH:mm' }}</div>
        <div class="temperature">
          <strong>{{reading.f35_temperature}}&deg;C</strong> in,
          <strong>{{reading.outside_temperature}}&deg;C</strong> out
        </div>
      </div>
    </div>

    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
    <script type="text/javascript">
      var app = angular.module('whySoHot', []);

      app.controller('ReadingCtrl', function($http, $scope) {
        $scope.readings = [];

        $http.get('/readings.json')
          .success(function(readings) {
            $scope.readings = readings;
          })
          .error(function() {
            alert('Something has gone horribly awry. Try reloading the page!');
          })
      });
    </script>
  </body>
</html>
